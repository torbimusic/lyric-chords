"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var note_1 = require("../note");
var constants_1 = require("../../constants");
var NoteAnalyzer = /** @class */ (function () {
    function NoteAnalyzer() {
    }
    NoteAnalyzer.apply = function (note) {
        var resultNote = note;
        var alteration = '';
        if (note.match(new RegExp(this.traditionalNoteRe, 'i'))) {
            var match = note.match(new RegExp(this.separeTraditionalNoteAndAlteration, 'i'));
            var traditionalNote = match[1];
            resultNote = constants_1.AmericanNote[constants_1.SouthernEuropeanNote[traditionalNote.toUpperCase()]];
            alteration = match[2] ? match[2] : "";
        }
        else {
            var match = note.match(new RegExp(this.separeAmericanNoteAndAlteration, 'i'));
            resultNote = match[1].toUpperCase();
            alteration = match[2] ? match[2] : "";
        }
        return note_1.Note.parse(resultNote + alteration);
    };
    NoteAnalyzer.traditionalNoteRe = "LA[b#]?|SI[b#]?|DO[b#]?|RE[b#]?|MI[b#]?|FA[b#]?|SOL[b#]?";
    NoteAnalyzer.americanNoteRe = "^[A-G]{1}[b#]?";
    NoteAnalyzer.separeTraditionalNoteAndAlteration = "^(LA|SI|DO|RE|MI|FA|SOL)([b#]?)";
    NoteAnalyzer.separeAmericanNoteAndAlteration = "^([A-G]{1})([b#]?)";
    return NoteAnalyzer;
}());
exports.NoteAnalyzer = NoteAnalyzer;
//# sourceMappingURL=note-analyzer.js.map